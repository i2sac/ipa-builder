# 📱 IPA Builder by i2sac

**Author:** [i2sac](https://github.com/i2sac)

[![Rust Edition 2021](https://img.shields.io/badge/rust-2021-blue.svg)](https://www.rust-lang.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT) <!-- Update if license is different -->
<!-- [![Crates.io](https://img.shields.io/crates/v/ipa_builder.svg)](https://crates.io/crates/ipa_builder) --> <!-- Uncomment when published -->
<!-- [![Build Status](https://github.com/i2sac/ipa-builder/actions/workflows/rust.yml/badge.svg)](https://github.com/i2sac/ipa-builder/actions/workflows/rust.yml) --> <!-- Uncomment and configure CI/CD -->

`IPA Builder by i2sac` is a Rust 🦀 application with a graphical user interface (GUI) 🖼️ designed to simplify the process of converting `Runner.app.zip` files (typically generated by CI/CD systems like Codemagic for Flutter projects) into `.ipa` files. These `.ipa` files can then be easily installed on iOS devices 📱 using tools like AltStore.

## 📖 Table of Contents

- [🎯 The Problem Solved](#-the-problem-solved)
- [🌟 Features](#-features)
- [🛠️ Tech Stack](#️-tech-stack)
- [🚀 Getting Started](#-getting-started)
- [🔧 Building from Source](#-building-from-source)
- [📚 Detailed Documentation](#-detailed-documentation)
- [🤝 Contributing](#-contributing)
- [📜 License](#-license)

## 🎯 The Problem Solved

Manually converting a `Runner.app.zip` to an `.ipa` involves several tedious steps:
1.  Extracting the `Runner.app.zip`, which often contains a nested `Runner.app` directory.
2.  Renaming the parent `Runner.app` directory (or the directory containing the actual `.app` bundle) to `Payload`.
3.  Compressing the `Payload` directory into a new `.zip` file.
4.  Renaming this new `.zip` file to the desired `app.ipa`.

This application automates this entire workflow, saving you time and effort! 🎉

## 🌟 Features

*   **Graphical User Interface:** Easy-to-use and intuitive interface built with [`egui`](https://github.com/emilk/egui). ✨
*   **Output Directory Configuration:** Choose a default output directory for all generated `.ipa` files (configured on first launch). 📂
*   **Application Configuration Management:**
    *   Import `Runner.app.zip` files.
    *   Specify a custom name for the output `.ipa` file.
    *   Edit existing configurations (name, input zip, output ipa name).
    *   Save these configurations for quick regeneration later. 💾
*   **One-Click Generation:** Generate `.ipa` files from saved configurations with a single click. ⚡
*   **Open Output Folder:** Quickly open the folder containing the last generated IPA. ➡️
*   **Delete Configurations:** Remove saved application configurations. 🗑️
*   **Light & Dark Mode:** Switch themes for user comfort. 🌓
*   **Search Functionality:** Easily find specific app configurations. 🔍
*   **Local Usage Metrics:** Tracks generation statistics (initial implementation). 📊

## 🛠️ Tech Stack

*   **Rust:** Core application language.
*   **[`egui`](https://github.com/emilk/egui) & [`eframe`](https://github.com/emilk/egui/tree/master/crates/eframe): For the GUI.
*   **[`serde`](https://serde.rs/):** For serialization and deserialization of app state and metrics.
*   **[`zip-rs`](https://github.com/zip-rs/zip):** For handling ZIP archive manipulation.
*   **[`chrono`](https://github.com/chronotope/chrono):** For date and time operations.
*   **[`uuid`](https://github.com/uuid-rs/uuid):** For generating unique identifiers.
*   **[`image`](https://github.com/image-rs/image):** For loading the application icon.
*   And more! Check `Cargo.toml` for the full list.

## 🚀 Getting Started

_(Pre-built binaries might be available in the [Releases](https://github.com/i2sac/ipa-builder/releases) section in the future.)_

To run the application, you'll currently need to build it from source.

## 🔧 Building from Source

1.  **Install Rust:** If you don't have Rust installed, get it from [rustup.rs](https://rustup.rs/).
2.  **Clone the Repository:**
    ```bash
    git clone https://github.com/i2sac/ipa-builder.git
    cd ipa-builder
    ```
3.  **Build and Run:**
    ```bash
    cargo run --release
    ```
    The `--release` flag is recommended for better performance.

## 📚 Detailed Documentation

For a step-by-step guide on how this application was built, how its components work, and how you could recreate it or contribute, please see the [**DOCUMENTATION.md**](DOCUMENTATION.md) file. 🤓

## 🤝 Contributing

Contributions are welcome! If you have ideas for improvements, new features, or find bugs, please feel free to:
*   Open an issue.
*   Submit a pull request.

## 📜 License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details. (Assuming MIT, please create a LICENSE file if it doesn't exist and update if different).
    *   Tracks events like app launches, IPA generations (success, duration, file size), apps added/removed.
    *   Metrics are stored locally in a JSONL file (`metrics.jsonl` in the app's data directory).

## Planned Features (Future Work)

*   **Installer:** A proper installer for the application.
    *   It will include Terms of Use, mentioning that anonymized usage data will be collected and sent daily to help improve the application.
*   **Automated Metrics Upload:** A daily (cron-like) task to send unsent local metrics to a remote server.
*   **Metrics Backend:** A JavaScript-based webhook to receive metrics, store them in a MySQL database, and expose them via a REST API for visualization.

## Prerequisites

*   **Rust:** Ensure you have a recent Rust toolchain installed. You can get it from [rustup.rs](https://rustup.rs/).
*   **For Linux Users (File Dialogs):** The application uses `native-dialog` for file and directory selection. This crate may require `zenity` or GTK development libraries to be installed on your system for the dialogs to function correctly. You can try installing `zenity`:
    ```bash
    sudo apt update
    sudo apt install zenity
    ```
    (Command may vary based on your Linux distribution).

## How to Build

1.  Clone the repository (if you haven't already):
    ```bash
    # git clone <repository_url>
    # cd ipa-builder
    ```
2.  Build the project using Cargo:
    ```bash
    cargo build
    ```
    For a release build (optimized):
    ```bash
    cargo build --release
    ```

## How to Run

After building, you can run the application using Cargo:
```bash
cargo run
```
If you built a release version, the executable will be in `target/release/ipa_builder`.

## Usage

1.  **First Launch:** On the first run, you'll be prompted to select a default output directory where all generated `.ipa` files will be saved.
2.  **Import Application:**
    *   Enter a name for your application (this will be used for the output `.ipa` file, e.g., `MyAwesomeApp`).
    *   Click "Select Runner.app.zip" and choose the `.zip` file from Codemagic.
    *   Click "Add Application".
3.  **Manage Applications:**
    *   The main screen will list all your configured applications.
    *   For each application, you can click "Generate IPA" to create the `.ipa` file in your configured output directory.
    *   Click "Delete" to remove an application configuration from the list.
4.  **Theme:** Use the Light/Dark mode switch at the top of the window to change the theme.

## License

This project is licensed under the terms of the LICENSE file present in the repository.

